{"version":3,"file":"Portal.esm-ade7ad8e.js","sources":["../../packages/Portal/lib/Portal.esm.js"],"sourcesContent":["// src/Portal.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport shallowEqual from \"shallowequal\";\nvar Portal = class extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this._portalEl = document.createElement(\"div\");\n    this._onClickDocument = (event) => {\n      var _a, _b;\n      if (!this.props.visible)\n        return;\n      (_b = (_a = this.props).onVisibleChange) == null ? void 0 : _b.call(_a, false, { event });\n    };\n  }\n  componentDidMount() {\n    var _a;\n    ;\n    ((_a = this.props.baseElement) != null ? _a : document.documentElement).addEventListener(\n      \"click\",\n      this._onClickDocument\n    );\n    this._assignRef(this.props.portalContainerRef, this._portalEl);\n    this._updatePortalEl(this._portalEl, null, this.props);\n  }\n  componentDidUpdate(prevProps) {\n    this._updatePortalEl(this._portalEl, prevProps, this.props);\n  }\n  componentWillUnmount() {\n    var _a;\n    ;\n    ((_a = this.props.baseElement) != null ? _a : document.documentElement).removeEventListener(\n      \"click\",\n      this._onClickDocument\n    );\n    this._updatePortalEl(this._portalEl, this.props, null);\n    this._assignRef(this.props.portalContainerRef, null);\n  }\n  render() {\n    if (this._getParent(this.props)) {\n      return ReactDOM.createPortal(this.props.children, this._portalEl);\n    }\n    return /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        className: this.props.className,\n        style: {\n          ...this._getDisplayStyle(this.props.visible),\n          ...this.props.style\n        }\n      },\n      this.props.children\n    );\n  }\n  _updatePortalEl(portalEl, prevProps, nextProps) {\n    var _a, _b, _c;\n    if (!prevProps || !nextProps || prevProps.parent !== nextProps.parent) {\n      this._operateParent(prevProps, (parent) => parent == null ? void 0 : parent.removeChild(portalEl));\n      this._operateParent(nextProps, (parent) => parent == null ? void 0 : parent.appendChild(portalEl));\n    }\n    if (nextProps) {\n      if (!prevProps || prevProps.className !== nextProps.className) {\n        portalEl.className = ((_a = nextProps.className) == null ? void 0 : _a.trim()) || \"\";\n      }\n      const prevStyle = (_b = prevProps && prevProps.style) != null ? _b : {};\n      const nextStyle = (_c = nextProps.style) != null ? _c : {};\n      if (!shallowEqual(prevStyle, nextStyle)) {\n        portalEl.style.cssText = \"\";\n        Object.assign(\n          portalEl.style,\n          this._getDisplayStyle(nextProps.visible),\n          nextStyle\n        );\n        Object.keys(nextStyle).filter((p) => p.startsWith(\"--\")).forEach((p) => {\n          portalEl.style.setProperty(p, nextStyle[p]);\n        });\n      } else {\n        if (nextProps.visible) {\n          portalEl.style.removeProperty(\"display\");\n        } else {\n          portalEl.style.display = \"none\";\n        }\n      }\n    }\n  }\n  _assignRef(ref, el) {\n    if (ref == null)\n      return;\n    if (typeof ref === \"function\") {\n      ref(el);\n    } else {\n      ;\n      ref.current = el;\n    }\n  }\n  _getDisplayStyle(visible) {\n    if (visible) {\n      return {};\n    } else {\n      return { display: \"none\" };\n    }\n  }\n  _getParent(props) {\n    if (props.parent === void 0) {\n      return document.body;\n    } else if (typeof props.parent === \"function\") {\n      return props.parent();\n    } else {\n      return props.parent;\n    }\n  }\n  _operateParent(props, operator) {\n    if (!props)\n      return;\n    operator(this._getParent(props));\n  }\n};\nPortal.displayName = \"Portal\";\nexport {\n  Portal\n};\n//# sourceMappingURL=Portal.esm.js.map"],"names":["Portal","React.PureComponent","event","_a","_b","prevProps","ReactDOM.createPortal","React.createElement","portalEl","nextProps","_c","parent","prevStyle","nextStyle","shallowEqual","p","ref","el","visible","props","operator"],"mappings":"wHAIA,IAAAA,EAAA,cAAAC,EAAAA,aAAA,CACA,aAAA,CACA,MAAA,GAAA,SAAA,EACA,KAAA,UAAA,SAAA,cAAA,KAAA,EACA,KAAA,iBAAAC,GAAA,CACA,IAAAC,EAAAC,EACA,KAAA,MAAA,WAEAA,GAAAD,EAAA,KAAA,OAAA,kBAAA,MAAAC,EAAA,KAAAD,EAAA,GAAA,CAAA,MAAAD,CAAA,CAAA,EACA,CACA,CACA,mBAAA,CACA,IAAAC,IAEAA,EAAA,KAAA,MAAA,cAAA,KAAAA,EAAA,SAAA,iBAAA,iBACA,QACA,KAAA,gBACA,EACA,KAAA,WAAA,KAAA,MAAA,mBAAA,KAAA,SAAA,EACA,KAAA,gBAAA,KAAA,UAAA,KAAA,KAAA,KAAA,CACA,CACA,mBAAAE,EAAA,CACA,KAAA,gBAAA,KAAA,UAAAA,EAAA,KAAA,KAAA,CACA,CACA,sBAAA,CACA,IAAAF,IAEAA,EAAA,KAAA,MAAA,cAAA,KAAAA,EAAA,SAAA,iBAAA,oBACA,QACA,KAAA,gBACA,EACA,KAAA,gBAAA,KAAA,UAAA,KAAA,MAAA,IAAA,EACA,KAAA,WAAA,KAAA,MAAA,mBAAA,IAAA,CACA,CACA,QAAA,CACA,OAAA,KAAA,WAAA,KAAA,KAAA,EACAG,EAAAA,aAAA,KAAA,MAAA,SAAA,KAAA,SAAA,EAEAC,EAAA,cACA,MACA,CACA,UAAA,KAAA,MAAA,UACA,MAAA,CACA,GAAA,KAAA,iBAAA,KAAA,MAAA,OAAA,EACA,GAAA,KAAA,MAAA,KACA,CACA,EACA,KAAA,MAAA,QACA,CACA,CACA,gBAAAC,EAAAH,EAAAI,EAAA,CACA,IAAAN,EAAAC,EAAAM,EAKA,IAJA,CAAAL,GAAA,CAAAI,GAAAJ,EAAA,SAAAI,EAAA,UACA,KAAA,eAAAJ,EAAAM,GAAAA,GAAA,KAAA,OAAAA,EAAA,YAAAH,CAAA,CAAA,EACA,KAAA,eAAAC,EAAAE,GAAAA,GAAA,KAAA,OAAAA,EAAA,YAAAH,CAAA,CAAA,GAEAC,EAAA,EACA,CAAAJ,GAAAA,EAAA,YAAAI,EAAA,aACAD,EAAA,YAAAL,EAAAM,EAAA,YAAA,KAAA,OAAAN,EAAA,KAAA,IAAA,IAEA,MAAAS,GAAAR,EAAAC,GAAAA,EAAA,QAAA,KAAAD,EAAA,GACAS,GAAAH,EAAAD,EAAA,QAAA,KAAAC,EAAA,GACAI,EAAAF,EAAAC,CAAA,EAWAJ,EAAA,QACAD,EAAA,MAAA,eAAA,SAAA,EAEAA,EAAA,MAAA,QAAA,QAbAA,EAAA,MAAA,QAAA,GACA,OAAA,OACAA,EAAA,MACA,KAAA,iBAAAC,EAAA,OAAA,EACAI,CACA,EACA,OAAA,KAAAA,CAAA,EAAA,OAAAE,GAAAA,EAAA,WAAA,IAAA,CAAA,EAAA,QAAAA,GAAA,CACAP,EAAA,MAAA,YAAAO,EAAAF,EAAAE,CAAA,CAAA,CACA,CAAA,EAQA,CACA,CACA,WAAAC,EAAAC,EAAA,CACAD,GAAA,OAEA,OAAAA,GAAA,WACAA,EAAAC,CAAA,EAGAD,EAAA,QAAAC,EAEA,CACA,iBAAAC,EAAA,CACA,OAAAA,EACA,GAEA,CAAA,QAAA,OAEA,CACA,WAAAC,EAAA,CACA,OAAAA,EAAA,SAAA,OACA,SAAA,KACA,OAAAA,EAAA,QAAA,WACAA,EAAA,SAEAA,EAAA,MAEA,CACA,eAAAA,EAAAC,EAAA,CACAD,GAEAC,EAAA,KAAA,WAAAD,CAAA,CAAA,CACA,CACA,EACAnB,EAAA,YAAA"}