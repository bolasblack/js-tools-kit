import{r as e}from"./index-8db94870.js";function y(m,p=[],w={loading:!1}){const t=e.useRef(w),[,u]=e.useState(Date.now()),l=e.useRef(0),o=e.useCallback(async s=>{for(;;){const n=l.current+=1,r=await a(s);if(n===l.current)return t.current=r,u(Date.now()),r;s=t.current.promise}async function a(n){let r;try{r={value:await n,loading:!1,promise:n}}catch(c){r={error:c,loading:!1,promise:n}}return r}},[]),i=e.useMemo(()=>m(),p),h=e.useCallback(async(...s)=>{const a=i(...s);return t.current={loading:!0,promise:a},u(Date.now()),o(a)},[i,o]),f=e.useRef(!0);f.current&&(f.current=!1,t.current.loading&&t.current.promise&&o(t.current.promise));const d=[t.current,h];return e.useDebugValue(d),d}export{y as u};
//# sourceMappingURL=useAsyncFnFactory-72d6232e.js.map
