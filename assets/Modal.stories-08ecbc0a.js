import{j as l,a as h,F as H}from"./jsx-runtime-91a467a5.js";import{r as n}from"./index-8db94870.js";import{P as I}from"./Portal-a992abbf.js";const P=`.Modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1001}.Modal__html--visible{overflow:hidden}.Modal__backdrop{position:absolute;width:100%;height:100%;background:rgb(0,0,0,.2)}.Modal__body{position:absolute;top:50%;left:50%;display:block;transform:translate(-50%,-50%)}
`,c=function(e){const{visible:a,onVisibleChange:o}=e;n.useEffect(()=>{const t=document.createElement("style");return t.textContent=P,document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const{documentElementClassName:r,documentElementClassNameWhenVisible:s,documentElementClassNameWhenInvisible:i}=e;n.useEffect(()=>{const t=[r];a&&s&&t.push(s),!a&&i&&t.push(i);const N=t.join(" ").split(" ");return document.documentElement.classList.add(...N),()=>{document.documentElement.classList.remove(...N)}},[a,r,s,i]);const{backdrop:m,backdropRef:f,backdropClassName:y}=e,v=n.useMemo(()=>m?l("div",{ref:f,className:y,onClick:t=>{m!=="static"&&(o==null||o(!1,{event:t.nativeEvent}))}}):null,[m,f,y,o]),{portalRef:C,portalContainerRef:k,portalClassName:M,partalParent:g,bodyRef:_,bodyClassName:E,children:V}=e;return n.useMemo(()=>h(I,{ref:C,portalContainerRef:k,className:M,visible:a,parent:g,children:[v,l("div",{ref:_,className:E,children:V})]}),[C,k,M,a,g,v,_,E,V])};c.defaultProps={backdrop:"clickHide",documentElementClassName:"Modal__html",documentElementClassNameWhenVisible:"Modal__html--visible",documentElementClassNameWhenInvisible:null,portalClassName:"Modal",backdropClassName:"Modal__backdrop",bodyClassName:"Modal__body"};function b({onVisibleChange:d,visible:e=!1,children:a,...o}){const[r,s]=n.useState(e),i=n.useMemo(()=>({visible:r,setVisible:s,show:()=>s(!0),hide:()=>s(!1)}),[r]),m=n.useMemo(()=>typeof a=="function"&&a(i),[a,i]);return[l(c,{visible:r,onVisibleChange:s,...o,children:m}),i]}try{b.displayName="useModal",b.__docgenInfo={description:"",displayName:"useModal",props:{visible:{defaultValue:null,description:"The visibility of modal",name:"visible",required:!1,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"Will be call when the visibility need to be changed",name:"onVisibleChange",required:!1,type:{name:"OnVisibleChangeCallback"}},backdrop:{defaultValue:{value:"clickHide"},description:'Backdrop style\n\n* `"clickHide"`: Show backdrop, request change visibility on clicked\n* `"static"`: Show backdrop, do nothing on clicked\n* `false`: Do not show backdrop',name:"backdrop",required:!1,type:{name:'false | "clickHide" | "static"'}},portalClassName:{defaultValue:{value:"Modal"},description:"Modal portal element class name",name:"portalClassName",required:!1,type:{name:"string"}},portalRef:{defaultValue:null,description:"Modal [portal](/portal-readme) ref",name:"portalRef",required:!1,type:{name:"Ref<Portal>"}},portalContainerRef:{defaultValue:null,description:"Modal [portal](/portal-readme)'s container ref",name:"portalContainerRef",required:!1,type:{name:"Ref<HTMLElement>"}},partalParent:{defaultValue:null,description:"Specify the parent element of portal",name:"partalParent",required:!1,type:{name:"HTMLElement | (() => HTMLElement)"}},documentElementClassName:{defaultValue:{value:"Modal__html"},description:"document.[documentElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement) class name",name:"documentElementClassName",required:!1,type:{name:"string"}},documentElementClassNameWhenVisible:{defaultValue:{value:"Modal__html--visible"},description:"document.[documentElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement) class name when modal visible.\n\nUse `null` to prevent add class name to documentElement",name:"documentElementClassNameWhenVisible",required:!1,type:{name:"string | null"}},documentElementClassNameWhenInvisible:{defaultValue:{value:"null"},description:"document.[documentElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement) class name when modal invisible.\n\nUse `null` to prevent add class name to documentElement",name:"documentElementClassNameWhenInvisible",required:!1,type:{name:"string | null"}},backdropClassName:{defaultValue:{value:"Modal__backdrop"},description:"Modal backdrop element class name",name:"backdropClassName",required:!1,type:{name:"string"}},backdropRef:{defaultValue:null,description:"Modal backdrop element ref",name:"backdropRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},bodyClassName:{defaultValue:{value:"Modal__body"},description:"Modal body element class name",name:"bodyClassName",required:!1,type:{name:"string"}},bodyRef:{defaultValue:null,description:"Modal body element ref",name:"bodyRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}try{c.displayName="Modal",c.__docgenInfo={description:"",displayName:"Modal",props:{visible:{defaultValue:null,description:"The visibility of modal",name:"visible",required:!0,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"Will be call when the visibility need to be changed",name:"onVisibleChange",required:!0,type:{name:"OnVisibleChangeCallback"}},backdrop:{defaultValue:{value:"clickHide"},description:'Backdrop style\n\n* `"clickHide"`: Show backdrop, request change visibility on clicked\n* `"static"`: Show backdrop, do nothing on clicked\n* `false`: Do not show backdrop',name:"backdrop",required:!1,type:{name:'false | "clickHide" | "static"'}},children:{defaultValue:null,description:"Children in modal body",name:"children",required:!1,type:{name:"ReactNode"}},portalClassName:{defaultValue:{value:"Modal"},description:"Modal portal element class name",name:"portalClassName",required:!1,type:{name:"string"}},portalRef:{defaultValue:null,description:"Modal [portal](/portal-readme) ref",name:"portalRef",required:!1,type:{name:"Ref<Portal>"}},portalContainerRef:{defaultValue:null,description:"Modal [portal](/portal-readme)'s container ref",name:"portalContainerRef",required:!1,type:{name:"Ref<HTMLElement>"}},partalParent:{defaultValue:null,description:"Specify the parent element of portal",name:"partalParent",required:!1,type:{name:"HTMLElement | (() => HTMLElement)"}},documentElementClassName:{defaultValue:{value:"Modal__html"},description:"document.[documentElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement) class name",name:"documentElementClassName",required:!1,type:{name:"string"}},documentElementClassNameWhenVisible:{defaultValue:{value:"Modal__html--visible"},description:"document.[documentElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement) class name when modal visible.\n\nUse `null` to prevent add class name to documentElement",name:"documentElementClassNameWhenVisible",required:!1,type:{name:"string | null"}},documentElementClassNameWhenInvisible:{defaultValue:{value:"null"},description:"document.[documentElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement) class name when modal invisible.\n\nUse `null` to prevent add class name to documentElement",name:"documentElementClassNameWhenInvisible",required:!1,type:{name:"string | null"}},backdropClassName:{defaultValue:{value:"Modal__backdrop"},description:"Modal backdrop element class name",name:"backdropClassName",required:!1,type:{name:"string"}},backdropRef:{defaultValue:null,description:"Modal backdrop element ref",name:"backdropRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},bodyClassName:{defaultValue:{value:"Modal__body"},description:"Modal body element class name",name:"bodyClassName",required:!1,type:{name:"string"}},bodyRef:{defaultValue:null,description:"Modal body element ref",name:"bodyRef",required:!1,type:{name:"Ref<HTMLDivElement>"}}}}}catch{}const U={title:"Components/Modal",component:c},u=()=>{const[d,e]=n.useState(!1),a=n.useCallback(()=>e(!0),[e]),o=n.useCallback(()=>e(!1),[e]);return h(H,{children:[l("button",{onClick:a,children:"show modal"}),l(c,{visible:d,onVisibleChange:e,children:l("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"576px",width:"calc(100vw - 72px)",height:"100px",borderRadius:"6px",background:"#fff"},children:l("button",{onClick:o,children:"hide modal"})})})]})},p=()=>{const[d,e]=b({children:a=>l("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"576px",width:"calc(100vw - 72px)",height:"100px",borderRadius:"6px",background:"#fff"},children:l("button",{onClick:a.hide,children:"hide modal"})})});return h(H,{children:[l("button",{onClick:e.show,children:"show modal"}),d]})};var R,w,x;u.parameters={...u.parameters,docs:{...(R=u.parameters)==null?void 0:R.docs,source:{originalSource:`() => {
  const [visible, setVisible] = useState(false);
  const showModal = useCallback(() => setVisible(true), [setVisible]);
  const hideModal = useCallback(() => setVisible(false), [setVisible]);
  return <>
      <button onClick={showModal}>show modal</button>

      <Modal visible={visible} onVisibleChange={setVisible}>
        <div style={{
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        maxWidth: '576px',
        width: 'calc(100vw - 72px)',
        height: '100px',
        borderRadius: '6px',
        background: '#fff'
      }}>
          <button onClick={hideModal}>hide modal</button>
        </div>
      </Modal>
    </>;
}`,...(x=(w=u.parameters)==null?void 0:w.docs)==null?void 0:x.source}}};var q,W,S;p.parameters={...p.parameters,docs:{...(q=p.parameters)==null?void 0:q.docs,source:{originalSource:`() => {
  const [modal, helpers] = useModal({
    children: helpers => <div style={{
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      maxWidth: '576px',
      width: 'calc(100vw - 72px)',
      height: '100px',
      borderRadius: '6px',
      background: '#fff'
    }}>
        <button onClick={helpers.hide}>hide modal</button>
      </div>
  });
  return <>
      <button onClick={helpers.show}>show modal</button>
      {modal}
    </>;
}`,...(S=(W=p.parameters)==null?void 0:W.docs)==null?void 0:S.source}}};const T=["BasicUsage","UseReactHook"],A=Object.freeze(Object.defineProperty({__proto__:null,BasicUsage:u,UseReactHook:p,__namedExportsOrder:T,default:U},Symbol.toStringTag,{value:"Module"}));export{u as B,A as M,p as U};
//# sourceMappingURL=Modal.stories-08ecbc0a.js.map
