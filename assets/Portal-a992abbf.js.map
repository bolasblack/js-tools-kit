{"version":3,"file":"Portal-a992abbf.js","sources":["../../packages/Portal/lib/Portal.js"],"sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport shallowEqual from 'shallowequal';\nexport class Portal extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this._portalEl = document.createElement('div');\n        this._onClickDocument = (event) => {\n            var _a, _b;\n            /* istanbul ignore next */\n            if (!this.props.visible)\n                return;\n            (_b = (_a = this.props).onVisibleChange) === null || _b === void 0 ? void 0 : _b.call(_a, false, { event });\n        };\n    }\n    componentDidMount() {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        ((_a = this.props.baseElement) !== null && _a !== void 0 ? _a : document.documentElement).addEventListener('click', this._onClickDocument);\n        this._assignRef(this.props.portalContainerRef, this._portalEl);\n        this._updatePortalEl(this._portalEl, null, this.props);\n    }\n    componentDidUpdate(prevProps) {\n        this._updatePortalEl(this._portalEl, prevProps, this.props);\n    }\n    componentWillUnmount() {\n        var _a;\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        ((_a = this.props.baseElement) !== null && _a !== void 0 ? _a : document.documentElement).removeEventListener('click', this._onClickDocument);\n        this._updatePortalEl(this._portalEl, this.props, null);\n        this._assignRef(this.props.portalContainerRef, null);\n    }\n    render() {\n        if (this._getParent(this.props)) {\n            return ReactDOM.createPortal(this.props.children, this._portalEl);\n        }\n        return (React.createElement(\"div\", { className: this.props.className, style: {\n                ...this._getDisplayStyle(this.props.visible),\n                ...this.props.style,\n            } }, this.props.children));\n    }\n    _updatePortalEl(portalEl, prevProps, nextProps) {\n        var _a, _b, _c;\n        if (!prevProps || !nextProps || prevProps.parent !== nextProps.parent) {\n            this._operateParent(prevProps, parent => parent === null || parent === void 0 ? void 0 : parent.removeChild(portalEl));\n            this._operateParent(nextProps, parent => parent === null || parent === void 0 ? void 0 : parent.appendChild(portalEl));\n        }\n        if (nextProps) {\n            if (!prevProps || prevProps.className !== nextProps.className) {\n                portalEl.className = ((_a = nextProps.className) === null || _a === void 0 ? void 0 : _a.trim()) || '';\n            }\n            const prevStyle = (_b = (prevProps && prevProps.style)) !== null && _b !== void 0 ? _b : {};\n            const nextStyle = (_c = nextProps.style) !== null && _c !== void 0 ? _c : {};\n            if (!shallowEqual(prevStyle, nextStyle)) {\n                portalEl.style.cssText = '';\n                Object.assign(portalEl.style, this._getDisplayStyle(nextProps.visible), nextStyle);\n                Object.keys(nextStyle)\n                    .filter(p => p.startsWith('--'))\n                    .forEach(p => {\n                    portalEl.style.setProperty(p, nextStyle[p]);\n                });\n            }\n            else {\n                if (nextProps.visible) {\n                    portalEl.style.removeProperty('display');\n                }\n                else {\n                    portalEl.style.display = 'none';\n                }\n            }\n        }\n    }\n    _assignRef(ref, el) {\n        if (ref == null)\n            return;\n        if (typeof ref === 'function') {\n            ref(el);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            ref.current = el;\n        }\n    }\n    _getDisplayStyle(visible) {\n        if (visible) {\n            return {};\n        }\n        else {\n            return { display: 'none' };\n        }\n    }\n    _getParent(props) {\n        if (props.parent === undefined) {\n            return document.body;\n        }\n        else if (typeof props.parent === 'function') {\n            return props.parent();\n        }\n        else {\n            return props.parent;\n        }\n    }\n    _operateParent(props, operator) {\n        if (!props)\n            return;\n        operator(this._getParent(props));\n    }\n}\nPortal.displayName = 'Portal';\n//# sourceMappingURL=Portal.js.map"],"names":["Portal","React.PureComponent","event","_a","_b","prevProps","ReactDOM.createPortal","React.createElement","portalEl","nextProps","_c","parent","prevStyle","nextStyle","shallowEqual","p","ref","el","visible","props","operator"],"mappings":"wHAGA,MAAAA,UAAAC,EAAAA,aAAA,CACA,aAAA,CACA,MAAA,GAAA,SAAA,EACA,KAAA,UAAA,SAAA,cAAA,KAAA,EACA,KAAA,iBAAAC,GAAA,CACA,IAAAC,EAAAC,EAEA,KAAA,MAAA,WAEAA,GAAAD,EAAA,KAAA,OAAA,mBAAA,MAAAC,IAAA,QAAAA,EAAA,KAAAD,EAAA,GAAA,CAAA,MAAAD,CAAA,CAAA,EACA,CACA,CACA,mBAAA,CACA,IAAAC,IAGAA,EAAA,KAAA,MAAA,eAAA,MAAAA,IAAA,OAAAA,EAAA,SAAA,iBAAA,iBAAA,QAAA,KAAA,gBAAA,EACA,KAAA,WAAA,KAAA,MAAA,mBAAA,KAAA,SAAA,EACA,KAAA,gBAAA,KAAA,UAAA,KAAA,KAAA,KAAA,CACA,CACA,mBAAAE,EAAA,CACA,KAAA,gBAAA,KAAA,UAAAA,EAAA,KAAA,KAAA,CACA,CACA,sBAAA,CACA,IAAAF,IAGAA,EAAA,KAAA,MAAA,eAAA,MAAAA,IAAA,OAAAA,EAAA,SAAA,iBAAA,oBAAA,QAAA,KAAA,gBAAA,EACA,KAAA,gBAAA,KAAA,UAAA,KAAA,MAAA,IAAA,EACA,KAAA,WAAA,KAAA,MAAA,mBAAA,IAAA,CACA,CACA,QAAA,CACA,OAAA,KAAA,WAAA,KAAA,KAAA,EACAG,EAAAA,aAAA,KAAA,MAAA,SAAA,KAAA,SAAA,EAEAC,EAAAA,cAAA,MAAA,CAAA,UAAA,KAAA,MAAA,UAAA,MAAA,CACA,GAAA,KAAA,iBAAA,KAAA,MAAA,OAAA,EACA,GAAA,KAAA,MAAA,KACA,CAAA,EAAA,KAAA,MAAA,QAAA,CACA,CACA,gBAAAC,EAAAH,EAAAI,EAAA,CACA,IAAAN,EAAAC,EAAAM,EAKA,IAJA,CAAAL,GAAA,CAAAI,GAAAJ,EAAA,SAAAI,EAAA,UACA,KAAA,eAAAJ,EAAAM,GAAAA,GAAA,KAAA,OAAAA,EAAA,YAAAH,CAAA,CAAA,EACA,KAAA,eAAAC,EAAAE,GAAAA,GAAA,KAAA,OAAAA,EAAA,YAAAH,CAAA,CAAA,GAEAC,EAAA,EACA,CAAAJ,GAAAA,EAAA,YAAAI,EAAA,aACAD,EAAA,YAAAL,EAAAM,EAAA,aAAA,MAAAN,IAAA,OAAA,OAAAA,EAAA,KAAA,IAAA,IAEA,MAAAS,GAAAR,EAAAC,GAAAA,EAAA,SAAA,MAAAD,IAAA,OAAAA,EAAA,CAAA,EACAS,GAAAH,EAAAD,EAAA,SAAA,MAAAC,IAAA,OAAAA,EAAA,GACAI,EAAAF,EAAAC,CAAA,EAUAJ,EAAA,QACAD,EAAA,MAAA,eAAA,SAAA,EAGAA,EAAA,MAAA,QAAA,QAbAA,EAAA,MAAA,QAAA,GACA,OAAA,OAAAA,EAAA,MAAA,KAAA,iBAAAC,EAAA,OAAA,EAAAI,CAAA,EACA,OAAA,KAAAA,CAAA,EACA,OAAAE,GAAAA,EAAA,WAAA,IAAA,CAAA,EACA,QAAAA,GAAA,CACAP,EAAA,MAAA,YAAAO,EAAAF,EAAAE,CAAA,CAAA,CACA,CAAA,EAUA,CACA,CACA,WAAAC,EAAAC,EAAA,CACAD,GAAA,OAEA,OAAAA,GAAA,WACAA,EAAAC,CAAA,EAKAD,EAAA,QAAAC,EAEA,CACA,iBAAAC,EAAA,CACA,OAAAA,EACA,GAGA,CAAA,QAAA,OAEA,CACA,WAAAC,EAAA,CACA,OAAAA,EAAA,SAAA,OACA,SAAA,KAEA,OAAAA,EAAA,QAAA,WACAA,EAAA,SAGAA,EAAA,MAEA,CACA,eAAAA,EAAAC,EAAA,CACAD,GAEAC,EAAA,KAAA,WAAAD,CAAA,CAAA,CACA,CACA,CACAnB,EAAA,YAAA"}